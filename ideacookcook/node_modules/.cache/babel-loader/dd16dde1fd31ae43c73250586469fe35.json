{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\benzs\\\\Documents\\\\GitHub\\\\ideacookcook\\\\ideacookcook\\\\src\\\\page\\\\editprofile.jsx\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport defualtProPic from \"../component/pic/anonymous.png\";\n\nclass Editprofile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      Facebook: \"\",\n      FirstName: \"\",\n      Instagram: \"\",\n      KnownName: \"\",\n      LastName: \"\",\n      Line: \"\",\n      PhoneNo: \"\",\n      ProfilePicture: null,\n      ProfilePictureURL: defualtProPic\n    };\n\n    this.fetchUserData = async () => {\n      await Axios.get(\"https://us-central1-ideacookcook.cloudfunctions.net/IdeaCookCook/User/data/\" + localStorage.getItem(\"currentMemID\")).then(res => {\n        const restmp = res.data.data;\n        this.setState({\n          Facebook: restmp.Facebook,\n          FirstName: restmp.FirstName,\n          Instagram: restmp.Instagram,\n          KnownName: restmp.KnownName,\n          LastName: restmp.LastName,\n          Line: restmp.Line,\n          PhoneNo: restmp.PhoneNo\n        });\n\n        if (restmp.ProfilePicture !== \"\") {\n          this.setState({\n            ProfilePictureURL: restmp.ProfilePicture\n          });\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.handleSubmit = async event => {\n      document.getElementById(\"editbut\").innerHTML = \"Loading...\";\n      event.preventDefault();\n      await Axios.patch(\"https://us-central1-ideacookcook.cloudfunctions.net/IdeaCookCook/User/UserData\", {\n        MemID: localStorage.getItem(\"currentMemID\"),\n        FirstName: this.state.FirstName,\n        LastName: this.state.LastName,\n        Instagram: this.state.Instagram,\n        KnownName: this.state.KnownName,\n        Facebook: this.state.Facebook,\n        Line: this.state.Line\n      }).then(res => {\n        if (res.data.description === \"Successfully update data\") {\n          alert(\"Successfully update data\");\n          localStorage.setItem(\"currentUser\", this.state.KnownName);\n        } else {\n          alert(\"Failed to update data!!!\");\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n      document.getElementById(\"editbut\").innerHTML = \"Edit\";\n    };\n\n    this.handleUploadFile = async () => {\n      document.getElementById(\"uploadbut\").innerHTML = \"Loading...\";\n\n      if (this.state.ProfilePicture !== null) {\n        const fd = new FormData();\n        fd.append(\"MemID\", localStorage.getItem(\"currentMemID\"));\n        fd.append(\"Picture\", this.state.ProfilePicture);\n        await Axios.patch(\"https://us-central1-ideacookcook.cloudfunctions.net/IdeaCookCook/User/UserPhoto\", fd).then(res => {\n          if (res.data.description === \"Successfully add photo and url\") {\n            alert(\"Uploading Success\");\n          } else {\n            alert(\"Failed to Upload!!!\");\n          }\n        }).catch(error => {\n          console.log(error);\n        });\n      } else {\n        alert(\"No file chosen.\");\n      }\n\n      document.getElementById(\"uploadbut\").innerHTML = \"Upload\";\n    };\n\n    this.handleChange = event => {\n      const target = event.target;\n      const value = target.value;\n      const name = target.name;\n      this.setState({\n        [name]: value\n      });\n      return true;\n    };\n\n    this.handleChangeFile = event => {\n      if (event.target.files[0]) {\n        this.setState({\n          ProfilePictureURL: URL.createObjectURL(event.target.files[0]),\n          ProfilePicture: event.target.files[0]\n        });\n      } else {\n        this.setState({\n          ProfilePicture: null\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem(\"currentMemID\") !== null) {\n      this.fetchUserData();\n    }\n  }\n\n  render() {\n    if (localStorage.getItem(\"currentMemID\") === null) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 14\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"form\", {\n        className: \"modal-content container1 \",\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }\n      }, \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\\u0E42\\u0E1B\\u0E23\\u0E44\\u0E1F\\u0E25\\u0E4C\"), /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }\n      }, \"Profile Picture\")), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: \"flex\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        alt: \"defaultProPic\",\n        height: \"120\",\n        width: \"120\",\n        src: this.state.ProfilePictureURL,\n        style: {\n          margin: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        style: {\n          border: \"0px\"\n        },\n        type: \"file\",\n        accept: \"image/*\",\n        id: \"img\",\n        name: \"ProfilePicture\",\n        onChange: this.handleChangeFile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        id: \"uploadbut\",\n        type: \"button\",\n        onClick: this.handleUploadFile,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }\n      }, \"Upload\"), /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }\n      }, \"KnownName\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.KnownName,\n        name: \"KnownName\",\n        onChange: this.handleChange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }\n      }, \"FirstName\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.FirstName,\n        name: \"FirstName\",\n        onChange: this.handleChange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }\n      }, \"LastName\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.LastName,\n        name: \"LastName\",\n        onChange: this.handleChange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }\n      }, \"Phone Number\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.PhoneNo,\n        name: \"PhoneNo\",\n        onChange: this.handleChange,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 13\n        }\n      }, \"Facebook\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.Facebook,\n        name: \"Facebook\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }\n      }, \"Instagram\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.Instagram,\n        name: \"Instagram\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }\n      }, \"Line\")), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.Line,\n        name: \"Line\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        id: \"editbut\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }\n      }, \"Edit\"));\n    }\n  }\n\n}\n\nexport default Editprofile;","map":{"version":3,"sources":["C:/Users/benzs/Documents/GitHub/ideacookcook/ideacookcook/src/page/editprofile.jsx"],"names":["React","Component","Redirect","Axios","defualtProPic","Editprofile","state","Facebook","FirstName","Instagram","KnownName","LastName","Line","PhoneNo","ProfilePicture","ProfilePictureURL","fetchUserData","get","localStorage","getItem","then","res","restmp","data","setState","catch","error","console","log","handleSubmit","event","document","getElementById","innerHTML","preventDefault","patch","MemID","description","alert","setItem","handleUploadFile","fd","FormData","append","handleChange","target","value","name","handleChangeFile","files","URL","createObjectURL","componentDidMount","render","display","margin","border"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Axios from \"axios\";\r\nimport defualtProPic from \"../component/pic/anonymous.png\";\r\n\r\nclass Editprofile extends Component {\r\n  state = {\r\n    Facebook: \"\",\r\n    FirstName: \"\",\r\n    Instagram: \"\",\r\n    KnownName: \"\",\r\n    LastName: \"\",\r\n    Line: \"\",\r\n    PhoneNo: \"\",\r\n    ProfilePicture: null,\r\n    ProfilePictureURL: defualtProPic,\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (localStorage.getItem(\"currentMemID\") !== null) {\r\n      this.fetchUserData();\r\n    }\r\n  }\r\n  fetchUserData = async () => {\r\n    await Axios.get(\r\n      \"https://us-central1-ideacookcook.cloudfunctions.net/IdeaCookCook/User/data/\" +\r\n        localStorage.getItem(\"currentMemID\")\r\n    )\r\n      .then((res) => {\r\n        const restmp = res.data.data;\r\n        this.setState({\r\n          Facebook: restmp.Facebook,\r\n          FirstName: restmp.FirstName,\r\n          Instagram: restmp.Instagram,\r\n          KnownName: restmp.KnownName,\r\n          LastName: restmp.LastName,\r\n          Line: restmp.Line,\r\n          PhoneNo: restmp.PhoneNo,\r\n        });\r\n        if (restmp.ProfilePicture !== \"\") {\r\n          this.setState({ ProfilePictureURL: restmp.ProfilePicture });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  handleSubmit = async (event) => {\r\n    document.getElementById(\"editbut\").innerHTML = \"Loading...\";\r\n    event.preventDefault();\r\n    await Axios.patch(\r\n      \"https://us-central1-ideacookcook.cloudfunctions.net/IdeaCookCook/User/UserData\",\r\n      {\r\n        MemID: localStorage.getItem(\"currentMemID\"),\r\n        FirstName: this.state.FirstName,\r\n        LastName: this.state.LastName,\r\n        Instagram: this.state.Instagram,\r\n        KnownName: this.state.KnownName,\r\n        Facebook: this.state.Facebook,\r\n        Line: this.state.Line,\r\n      }\r\n    )\r\n      .then((res) => {\r\n        if (res.data.description === \"Successfully update data\") {\r\n          alert(\"Successfully update data\");\r\n          localStorage.setItem(\"currentUser\", this.state.KnownName);\r\n        } else {\r\n          alert(\"Failed to update data!!!\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n    document.getElementById(\"editbut\").innerHTML = \"Edit\";\r\n  };\r\n\r\n  handleUploadFile = async () => {\r\n    document.getElementById(\"uploadbut\").innerHTML = \"Loading...\";\r\n    if (this.state.ProfilePicture !== null) {\r\n      const fd = new FormData();\r\n      fd.append(\"MemID\", localStorage.getItem(\"currentMemID\"));\r\n      fd.append(\"Picture\", this.state.ProfilePicture);\r\n      await Axios.patch(\r\n        \"https://us-central1-ideacookcook.cloudfunctions.net/IdeaCookCook/User/UserPhoto\",\r\n        fd\r\n      )\r\n        .then((res) => {\r\n          if (res.data.description === \"Successfully add photo and url\") {\r\n            alert(\"Uploading Success\");\r\n          } else {\r\n            alert(\"Failed to Upload!!!\");\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    } else {\r\n      alert(\"No file chosen.\");\r\n    }\r\n    document.getElementById(\"uploadbut\").innerHTML = \"Upload\";\r\n  };\r\n  handleChange = (event) => {\r\n    const target = event.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n    this.setState({ [name]: value });\r\n    return true;\r\n  };\r\n  handleChangeFile = (event) => {\r\n    if (event.target.files[0]) {\r\n      this.setState({\r\n        ProfilePictureURL: URL.createObjectURL(event.target.files[0]),\r\n        ProfilePicture: event.target.files[0],\r\n      });\r\n    } else {\r\n      this.setState({\r\n        ProfilePicture: null,\r\n      });\r\n    }\r\n  };\r\n  render() {\r\n    if (localStorage.getItem(\"currentMemID\") === null) {\r\n      return <Redirect to=\"/\" />;\r\n    } else {\r\n      return (\r\n        <form\r\n          className=\"modal-content container1 \"\r\n          onSubmit={this.handleSubmit}\r\n        >\r\n          <h2>แก้ไขโปรไฟล์</h2>\r\n          <label>\r\n            <b>Profile Picture</b>\r\n          </label>\r\n          <div style={{ display: \"flex\" }}>\r\n            <img\r\n              alt=\"defaultProPic\"\r\n              height=\"120\"\r\n              width=\"120\"\r\n              src={this.state.ProfilePictureURL}\r\n              style={{ margin: \"10px\" }}\r\n            />\r\n            <input\r\n              style={{ border: \"0px\" }}\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              id=\"img\"\r\n              name=\"ProfilePicture\"\r\n              onChange={this.handleChangeFile}\r\n            ></input>\r\n          </div>\r\n          <button id=\"uploadbut\" type=\"button\" onClick={this.handleUploadFile}>\r\n            Upload\r\n          </button>\r\n          <label>\r\n            <b>KnownName</b>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={this.state.KnownName}\r\n            name=\"KnownName\"\r\n            onChange={this.handleChange}\r\n            required\r\n          />\r\n\r\n          <label>\r\n            <b>FirstName</b>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={this.state.FirstName}\r\n            name=\"FirstName\"\r\n            onChange={this.handleChange}\r\n            required\r\n          />\r\n\r\n          <label>\r\n            <b>LastName</b>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={this.state.LastName}\r\n            name=\"LastName\"\r\n            onChange={this.handleChange}\r\n            required\r\n          />\r\n\r\n          <label>\r\n            <b>Phone Number</b>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={this.state.PhoneNo}\r\n            name=\"PhoneNo\"\r\n            onChange={this.handleChange}\r\n            required\r\n          />\r\n\r\n          <label>\r\n            <b>Facebook</b>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={this.state.Facebook}\r\n            name=\"Facebook\"\r\n            onChange={this.handleChange}\r\n          />\r\n\r\n          <label>\r\n            <b>Instagram</b>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={this.state.Instagram}\r\n            name=\"Instagram\"\r\n            onChange={this.handleChange}\r\n          />\r\n\r\n          <label>\r\n            <b>Line</b>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={this.state.Line}\r\n            name=\"Line\"\r\n            onChange={this.handleChange}\r\n          />\r\n\r\n          <button type=\"submit\" id=\"editbut\">\r\n            Edit\r\n          </button>\r\n        </form>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Editprofile;\r\n"]},"metadata":{},"sourceType":"module"}